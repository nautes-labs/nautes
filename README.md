
<div style="margin-top: 40px; margin-left: 20px; margin-right: 20px;">
<p align="center">
<a href="https://nautes.io/"><img src="docs/images/nautes.png" alt="banner" width="147" height="125.4"></a>
</p>
<p align=center>
<a href="https://img.shields.io/badge/License-Apache%202.0-blue.svg"><img src="https://img.shields.io/badge/License-Apache%202.0-blue.svg" alt="License"></a>
<a href="https://img.shields.io/badge/kubernetes-1.21-green"><img src="https://img.shields.io/badge/kubernetes-1.21-green" alt="Kubernetes"></a>
<a href="https://img.shields.io/badge/version-v0.3.9-green"><img src="https://img.shields.io/badge/version-v0.3.9-green" alt="Version"></a>
</p>
</div>

> [English](./README_en.md) | ä¸­æ–‡

## Nautes æ˜¯ä»€ä¹ˆï¼Ÿ

Nautes æ˜¯ Kubernetes åŸç”Ÿçš„å¼€æºä¸€ç«™å¼å¼€å‘è€…å¹³å°ï¼Œèåˆäº† DevOps å’Œ GitOps çš„ç†å¿µå’Œæœ€ä½³å®è·µï¼Œä»¥å¯æ’æ‹”çš„æ–¹å¼é›†æˆäº†ä¸šç•Œæœ€ä¼˜ç§€çš„äº‘åŸç”Ÿå¼€æºé¡¹ç›®ã€‚

> å½“å‰ç‰ˆæœ¬ä»…ç”¨äºæ¼”ç¤ºæˆ–è¯•ç”¨ï¼ŒåŠŸèƒ½è¿˜åœ¨ä¸æ–­å®Œå–„ä¸­ï¼Œä¸å»ºè®®ç”¨åœ¨ç”Ÿäº§ç¯å¢ƒã€‚

## ç‰¹æ€§

- è¦†ç›–æ•æ·å¼€å‘ã€CI/CDã€è‡ªåŠ¨åŒ–æµ‹è¯•ã€å®‰å…¨ã€è¿ç»´ç­‰å…¨æµç¨‹çš„ä¸€ç«™å¼å¼€å‘è€…å¹³å°ã€‚
- éµå¾ª GitOps æœ€ä½³å®è·µï¼Œä»¥ç‰ˆæœ¬åº“ä½œä¸ºå”¯ä¸€å¯ä¿¡æ•°æ®æºã€‚å½“ç‰ˆæœ¬åº“ä¸­çš„æ•°æ®æœ‰å˜æ›´æ—¶ï¼Œç”± Operator è‡ªåŠ¨è¯†åˆ«å˜æ›´å¹¶å‘ Kubernetes é›†ç¾¤åšå¢é‡æ›´æ–°ã€‚
- å…¨åˆ†å¸ƒå¼çš„å¤šç§Ÿæˆ·æ¶æ„ï¼Œç§Ÿæˆ·ä½œä¸ºåˆ†å¸ƒå¼çš„è®¡ç®—å•å…ƒå’Œå­˜å‚¨å•å…ƒæ”¯æŒæ°´å¹³æ‰©å±•ï¼Œç§Ÿæˆ·æ‰€ç®¡ç†çš„èµ„æºåŒæ ·æ”¯æŒæ°´å¹³æ‰©å±•ã€‚
- è‰¯å¥½çš„é€‚é…æ€§ï¼Œé™¤äº†åº•åº§ Kubernetes ä»¥åŠ Git å¤–ï¼Œå…¶ä»–ç»„ä»¶å‡å¯è¢«æ›¿æ¢ã€‚
- æ‰€æœ‰åŠŸèƒ½å‡æä¾›å£°æ˜å¼çš„REST APIï¼Œæ”¯æŒäºŒæ¬¡å¼€å‘ã€‚
- å¯¹æ‰€é›†æˆçš„å¼€æºé¡¹ç›®ï¼Œå‡ä¿æŒå…¶åŸç”Ÿç‰¹æ€§ï¼Œæ— è£å‰ªå¼å°è£…ï¼Œå¯¹å—ç®¡åº”ç”¨ä¸äº§ç”ŸäºŒæ¬¡ç»‘å®šã€‚
- é€šè¿‡æ„å»ºä¸Šå±‚æ•°æ®æ¨¡å‹ï¼Œå®ç°å¯¹æ‰€é›†æˆçš„å¼€æºé¡¹ç›®çš„ç»Ÿä¸€è®¤è¯ã€ç»Ÿä¸€æˆæƒã€‚
- æ”¯æŒç§æœ‰äº‘ã€æ··åˆäº‘çš„éƒ¨ç½²æ¨¡å¼ã€‚

## æ¶æ„

Nautes é‡‡ç”¨å…¨åˆ†å¸ƒå¼çš„å¤šç§Ÿæˆ·æ¶æ„ï¼Œå¹³å°ç®¡ç†é›†ç¾¤è´Ÿè´£ç§Ÿæˆ·çš„åˆ†é…å’Œå›æ”¶ï¼Œæ¯ä¸ªç§Ÿæˆ·ç‹¬å ä¸€å¥—èµ„æºï¼ˆåŒ…æ‹¬ä»£ç åº“ã€å¯†é’¥åº“ã€åˆ¶å“åº“ã€è®¤è¯æœåŠ¡å™¨ã€é›†ç¾¤ç­‰ï¼‰ï¼Œç§Ÿæˆ·å†…çš„èµ„æºç”±ç§Ÿæˆ·ç®¡ç†é›†ç¾¤è¿›è¡Œç®¡ç†ã€‚

ç§Ÿæˆ·ä½œä¸ºèµ„æºçš„ç®¡ç†å•å…ƒï¼Œå¯ç”±ç”¨æˆ·æ ¹æ®è‡ªèº«ç»„ç»‡ç‰¹æ€§è¿›è¡Œåˆ’åˆ†ï¼Œå¸¸è§çš„åˆ’åˆ†æ–¹å¼æœ‰ï¼šæŒ‰äº§å“å›¢é˜Ÿã€æŒ‰éƒ¨é—¨ã€æŒ‰å­å…¬å¸ç­‰ã€‚

ç§Ÿæˆ·å†…çš„èµ„æºä¹Ÿæ”¯æŒå¤šå®ä¾‹éƒ¨ç½²ï¼Œä¾‹å¦‚ï¼šå¯ä»¥åœ¨ä¸€ä¸ªç§Ÿæˆ·å†…éƒ¨ç½²å¤šä¸ª Harbor å®ä¾‹ï¼Œç”¨äºéš”ç¦»ä¸åŒäº§å“çš„å®¹å™¨é•œåƒæ•°æ®ã€‚

![](docs/images/brief-architecture.png)

## å¼€æºé¡¹ç›®

Nautes çš„å½“å‰ç‰ˆæœ¬ä¸»è¦é›†æˆäº†ä»¥ä¸‹å¼€æºé¡¹ç›®ï¼ˆåºå·ä¸ä»£è¡¨æ’åºï¼‰ï¼š

> æˆ‘ä»¬å¯¹è¿™äº›ä¼˜ç§€é¡¹ç›®ï¼ˆåŒ…æ‹¬åœ¨ Nautes ä¸­ä½¿ç”¨åˆ°ï¼Œä½†æœªåœ¨ä¸‹è¡¨åˆ—å‡ºçš„æ‰€æœ‰é¡¹ç›®ï¼‰çš„ä½œè€…è¡¨ç¤ºè¡·å¿ƒçš„æ„Ÿè°¢ï¼

| åºå· | å¼€æºé¡¹ç›®           | ç”¨é€”                          | ç‰ˆæœ¬          | å¼€æºè®¸å¯     | é¡¹ç›®åœ°å€                                                   |
| ---- | ------------------ | ----------------------------- | ------------- | ------------ | ---------------------------------------------------------- |
| 1    | Terraform          | ç”¨äºæ„å»ºåŸºç¡€è®¾æ–½              | v1.3.4        | MPL-2.0      | https://github.com/hashicorp/terraform                     |
| 2    | Ansible            | å®‰è£…ç¨‹åºçš„è„šæ‰‹æ¶              | 2.12.5        | GPL-3.0      | https://github.com/ansible/ansible                         |
| 3    | Kubespray          | Kubernetes çš„å®‰è£…ç¨‹åº         | v2.19.1       | Apache-2.0   | https://github.com/kubernetes-sigs/kubespray               |
| 4    | Ansible Vault      | Vault çš„å®‰è£…ç¨‹åº              | v2.5.8        | BSD-2-Clause | https://github.com/ansible-community/ansible-vault         |
| 5    | Geerlingguy.Gitlab | Gitlab çš„å®‰è£…ç¨‹åº             | 3.2.0         | MIT          | https://github.com/geerlingguy/ansible-role-gitlab         |
| 6    | Kubebuilder        | Operator è„šæ‰‹æ¶               | v3.2.0        | Apache-2.0   | https://github.com/kubernetes-sigs/kubebuilder             |
| 7    | Kratos             | å¾®æœåŠ¡è„šæ‰‹æ¶                  | v2.5.4        | MIT          | https://github.com/go-kratos/kratos                        |
| 8    | Vuepress           | æ–‡æ¡£ç«™ç‚¹è„šæ‰‹æ¶                | 1.9.9         | MIT          | https://github.com/vuejs/vuepress                          |
| 9    | Kubernetes         | å®¹å™¨å¹³å°ã€äº§å“åº•åº§            | 1.23.7        | Apache-2.0   | https://github.com/kubernetes/kubernetes                   |
| 10   | K3s                | è½»é‡çº§ Kubernetes å‘è¡Œç‰ˆ      | v1.21.13-k3s1 | Apache-2.0   | https://github.com/k3s-io/k3s                              |
| 11   | Vcluster           | ç”¨äº Kubernetes çš„å¤šç§Ÿæˆ·éš”ç¦»  | 0.10.1        | Apache-2.0   | https://github.com/loft-sh/vcluster                        |
| 12   | HNC                | ç”¨äº Kubernetes çš„å¤šç§Ÿæˆ·éš”ç¦»  | v1.0.0        | Apache-2.0   | https://github.com/kubernetes-sigs/hierarchical-namespaces |
| 13   | Dex                | ç”¨äºå•ç‚¹ç™»å½•ã€ç»Ÿä¸€è®¤è¯        | v2.32.0       | Apache-2.0   | https://github.com/dexidp/dex                              |
| 14   | Vault              | å¯†é’¥ä»“åº“                      | 1.10.4        | MPL-2.0      | https://github.com/hashicorp/vault                         |
| 15   | External Secrets   | ç”¨äºåŒæ­¥å¯†é’¥åˆ° Kubernetes     | 0.5.7         | Apache-2.0   | https://github.com/external-secrets/external-secrets       |
| 16   | Gitlab             | ä»£ç ä»“åº“ã€IDPã€åŸºç¡€æ•°æ®æä¾›è€… | 15.10         | MIT          | https://gitlab.com/gitlab-org/gitlab                       |
| 17   | Nexus              | æˆå“åŒ…ä»“åº“                    | 3.39.0        | EPL-1.0      | https://github.com/sonatype/nexus-public                   |
| 18   | Harbor             | å®¹å™¨é•œåƒä»“åº“                  | v2.5.1        | Apache-2.0   | https://github.com/goharbor/harbor                         |
| 19   | Argocd             | ç”¨äºæŒç»­éƒ¨ç½²                  | v2.4.0        | Apache-2.0   | https://github.com/argoproj/argo-cd                        |
| 20   | Argorollouts       | ç”¨äºæ¸è¿›å¼äº¤ä»˜                | v1.2.1        | Apache-2.0   | https://github.com/argoproj/argo-rollouts                  |
| 21   | Argoevents         | äº‹ä»¶ç›‘å¬å™¨                    | v1.7.1        | Apache-2.0   | https://github.com/argoproj/argo-events                    |
| 22   | Tekton Pipeline    | æµæ°´çº¿                        | v0.37.5       | Apache-2.0   | https://github.com/tektoncd/pipeline                       |
| 23   | Cert Manager       | ç”¨äºè‡ªç­¾è¯ä¹¦                  | v1.8.0        | Apache-2.0   | https://github.com/cert-manager/cert-manager               |
| 24   | Traefik            | Ingress æ§åˆ¶å™¨                | v2.7.1        | MIT          | https://github.com/traefik/traefik                         |
| 25   | Sonarqube          | ç”¨äºä»£ç é™æ€æ£€æŸ¥              | 9.5           | LGPL-3.0     | https://github.com/SonarSource/sonarqube                   |

## ä¸»ä½“åŠŸèƒ½

Nautes çš„ä¸»ä½“æµç¨‹ä»¥åŠå‚ä¸è§’è‰²å¦‚ä¸‹ï¼š

**ç§Ÿæˆ·ç®¡ç†å‘˜**ï¼šè´Ÿè´£ç®¡ç†ç§Ÿæˆ·å†…çš„èµ„æºç»„ä»¶ï¼Œå¦‚æ³¨å†Œé›†ç¾¤ã€æ¥å…¥åˆ¶å“åº“ç­‰ã€‚

**é…ç½®ç®¡ç†å‘˜**ï¼šè´Ÿè´£ç®¡ç†ITç³»ç»Ÿåœ¨å¼€å‘å’Œè¿è¡Œè¿‡ç¨‹ä¸­æ‰€éœ€çš„ç¯å¢ƒå’Œèµ„æºï¼Œå¦‚ç»´æŠ¤äº§å“åŸºç¡€æ•°æ®ã€åˆ›å»ºä»£ç åº“ã€åˆ†é…åˆ¶å“åº“ã€å®šä¹‰è¿è¡Œæ—¶ç­‰ã€‚

**äº§å“å›¢é˜Ÿ**ï¼šä½¿ç”¨å¹³å°åŠŸèƒ½è¿›è¡ŒITç³»ç»Ÿçš„ç ”å‘å’Œè¿è¡Œï¼Œå¦‚æäº¤ä»£ç ã€ä¸Šä¼ ä¾èµ–åŒ…ã€é…ç½®æµæ°´çº¿ã€æ¢ç´¢æ€§æµ‹è¯•ç­‰ã€‚

![](docs/images/main-process.png)

## å®ä½“å®šä¹‰

- **äº§å“**ï¼šå¯¹åº”ä¸€ä¸ªè½¯ä»¶ç³»ç»Ÿï¼ŒåŒ…å«å›¢é˜Ÿã€é¡¹ç›®ã€ç¯å¢ƒã€ä»£ç åº“ã€åˆ¶å“åº“ã€åŠè¿è¡Œæ—¶ã€‚äº§å“å¯ä»¥è¢«ç§Ÿæˆ·ç®¡ç†å‘˜æˆæƒä½¿ç”¨æŒ‡å®šçš„ Kubernetes é›†ç¾¤ã€‚
- **é¡¹ç›®**ï¼šå¯¹åº”ä¸€ä¸ªå¾®æœåŠ¡ï¼Œæ¯ä¸ªé¡¹ç›®æœ‰è‡ªå·±çš„ä»£ç åº“ã€‚æ‚¨å¯ä»¥ä½¿ç”¨é›†ç¾¤è¿›è¡Œé¡¹ç›®çš„é›†æˆå’Œéƒ¨ç½²ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨äº§å“çš„åˆ¶å“åº“å¯¹é¡¹ç›®çš„åˆ¶å“è¿›è¡Œå­˜å‚¨å’Œç‰ˆæœ¬ç®¡ç†ã€‚ ä¸€ä¸ªäº§å“ä¸‹å¯ä»¥åŒ…å«å¤šä¸ªé¡¹ç›®ã€‚
- **ç¯å¢ƒ**ï¼šä½¿ç”¨é›†ç¾¤ï¼ˆç›®å‰åªæ”¯æŒ Kubernetesé›†ç¾¤ï¼‰æ¥æ‰¿è½½äº§å“ä¸­å„ä¸ªé¡¹ç›®çš„é›†æˆå’Œéƒ¨ç½²çš„ç®¡ç†å•å…ƒã€‚ä¸€ä¸ªäº§å“åŒ…å«å¤šä¸ªç¯å¢ƒï¼Œå¦‚ï¼šå¼€å‘ç¯å¢ƒã€æµ‹è¯•ç¯å¢ƒã€é¢„ç”Ÿäº§ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒç­‰ã€‚
- **ä»£ç åº“**ï¼šç”¨äºå­˜å‚¨é¡¹ç›®çš„æºä»£ç ã€æµæ°´çº¿é…ç½®ã€éƒ¨ç½²æ¸…å•çš„ç‰ˆæœ¬åº“ã€‚åªæ”¯æŒ Gitã€‚
- **æµæ°´çº¿è¿è¡Œæ—¶**ï¼šå®šä¹‰ç”¨äºé›†æˆé¡¹ç›®çš„æµæ°´çº¿çš„é…ç½®å£°æ˜ï¼Œå¦‚ï¼šæµæ°´çº¿é…ç½®çš„å­˜å‚¨ä½ç½®ã€æµæ°´çº¿çš„è§¦å‘æ–¹å¼ã€è¿è¡Œæµæ°´çº¿çš„ç›®æ ‡ç¯å¢ƒç­‰ã€‚
- **éƒ¨ç½²è¿è¡Œæ—¶**ï¼šå®šä¹‰ç”¨äºéƒ¨ç½²é¡¹ç›®çš„é…ç½®å£°æ˜ï¼Œå¦‚ï¼šéƒ¨ç½²æ¸…å•çš„å­˜å‚¨ä½ç½®ã€éƒ¨ç½²åˆ°çš„ç›®æ ‡ç¯å¢ƒç­‰ã€‚

## æ ¸å¿ƒç»„ä»¶

Nautes ä¸»è¦åŒ…å«ä»¥ä¸‹ç»„ä»¶ï¼š

<details>
  <summary><b>ğŸ‘¤ Base Operator</b></summary>
  å¤„ç†äº§å“å®ä½“å’Œæƒé™å®ä½“ä»æä¾›è€…åˆ°ç›®æ ‡æœåŠ¡çš„åŒæ­¥ã€‚<a href="./app/base-operator">äº†è§£æ›´å¤š</a>ã€‚
</details>

<details>
  <summary><b>ğŸ–¥ï¸ Cluster Operator</b></summary>
  æä¾›äº†ä¸€ä¸ªç”¨äºè°ƒè° Cluster èµ„æºäº‹ä»¶çš„ Controllerï¼Œè°ƒè°å†…å®¹ä¸»è¦æ˜¯ç®¡ç† Cluster èµ„æºæ‰€å£°æ˜çš„ Kubernetes é›†ç¾¤çš„å¯†é’¥ä¿¡æ¯ï¼Œä½¿å‚ä¸é›†ç¾¤ç®¡ç†çš„å…¶ä»–ç»„ä»¶å¯ä»¥ä»ç§Ÿæˆ·çš„å¯†é’¥ç®¡ç†ç³»ç»Ÿä¸­æ­£ç¡®è·å–åˆ°é›†ç¾¤çš„å¯†é’¥ã€‚<a href="./app/cluster-operator">äº†è§£æ›´å¤š</a>ã€‚
</details>

<details>
  <summary><b>ğŸ”— Argo Operator</b></summary>
  æä¾›äº†ä¸€ç»„ç”¨äºè°ƒè° Cluster èµ„æºå’Œ CodeRepo èµ„æºäº‹ä»¶çš„ Controllerï¼Œè°ƒè°å†…å®¹ä¸»è¦æ˜¯å°† Cluster èµ„æºæ‰€å£°æ˜çš„ Kubernetes é›†ç¾¤å’Œ CodeRepo èµ„æºæ‰€å£°æ˜çš„ä»£ç åº“åŒæ­¥åˆ°åŒé›†ç¾¤çš„ ArgoCD ä¸­ï¼Œä½¿ ArgoCD ä¸­ä½¿ç”¨äº†è¿™äº› Kubernetes é›†ç¾¤å’Œä»£ç åº“çš„ Application å¯ä»¥æ­£å¸¸å·¥ä½œã€‚<a href="./app/argo-operator">äº†è§£æ›´å¤š</a>ã€‚
</details>

<details>
  <summary><b>âš™ï¸ Runtime Operator</b></summary>
  æä¾›äº†ä¸€ç»„ç”¨äºè°ƒè° Project Pipeline Runtime èµ„æºå’Œ Deployment Runtime èµ„æºäº‹ä»¶çš„ Controllerï¼Œè°ƒè°å†…å®¹ä¸»è¦æ˜¯æ ¹æ®ä¸¤ç±»è¿è¡Œæ—¶èµ„æºçš„å£°æ˜ä¿¡æ¯ï¼Œåœ¨ç›®æ ‡é›†ç¾¤ä¸ŠåŒæ­¥æµæ°´çº¿æ‰§è¡Œæˆ–åº”ç”¨éƒ¨ç½²æ‰€éœ€çš„åŸºç¡€ç¯å¢ƒã€‚<a href="./app/runtime-operator">äº†è§£æ›´å¤š</a>ã€‚
</details>

<details>
  <summary><b>ğŸ¤– Installer</b></summary>
  æä¾›äº†ä¸€é”®éƒ¨ç½²åŠŸèƒ½ï¼Œæ”¯æŒåŸºç¡€è®¾æ–½ã€èµ„æºç»„ä»¶ã€ç®¡ç†ç»„ä»¶ã€ä»¥åŠå„ç»„ä»¶åˆå§‹åŒ–çš„è‡ªåŠ¨åŒ–å®‰è£…ã€‚<a href="https://github.com/nautes-labs/installer">äº†è§£æ›´å¤š</a>ã€‚
</details>

<details>
  <summary><b>ğŸŒ API Server</b></summary>
  Nautes çš„è®¾è®¡æ˜¯éµå¾ªäº† GitOps çš„æœ€ä½³å®è·µï¼Œç”¨æˆ·åº”ç”¨ç¯å¢ƒä»¥åŠ Nautes è‡ªèº«ç¯å¢ƒçš„é…ç½®å£°æ˜å‡å­˜å‚¨åœ¨ç‰ˆæœ¬åº“ä¸­ã€‚å£°æ˜æ•°æ®åˆ†ä¸ºä¸¤ç±»ï¼šå¯†é’¥æ•°æ®æ˜¯å­˜å‚¨åœ¨ Vault ä¸­ï¼Œå…¶ä»–æ•°æ®æ˜¯å­˜å‚¨åœ¨ Gitï¼ˆç›®å‰åªæ”¯æŒ GitLabï¼‰ä»“åº“ä¸­ï¼ŒAPI Server é¡¹ç›®åˆ™æä¾›äº†ä¸€ç»„ç”¨äºæ“ä½œè¿™äº›é…ç½®å£°æ˜çš„ REST APIã€‚<a href="./app/api-server">äº†è§£æ›´å¤š</a>ã€‚
</details>

<details>
  <summary><b>â¡ï¸ CLI</b></summary>
  é€šè¿‡å°è£… API Server çš„ REST API æä¾›äº†ä¸€ä¸ªç®€å•çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œç”¨äºç®€åŒ–ç”¨æˆ·ä½¿ç”¨ API çš„æ“ä½œã€‚<a href="https://github.com/nautes-labs/cli">äº†è§£æ›´å¤š</a>ã€‚
</details>

## å®‰è£…

Nautes æ”¯æŒåŸºäºå…¬æœ‰äº‘ã€ç§æœ‰äº‘ã€ä¸»æœºã€åŠ Kubernets é›†ç¾¤è¿›è¡Œå®‰è£…ï¼Œæ‚¨å¯ä»¥é€šè¿‡[è¿™é‡Œ](https://nautes.io/guide/user-guide/installation.html)äº†è§£å¦‚ä½•åœ¨é˜¿é‡Œäº‘ä¸Šä¸€é”®å®‰è£… Nautesã€‚

## å¿«é€Ÿå¼€å§‹

æˆ‘ä»¬æä¾›äº†ä¸€ä»½ç®€è¦çš„æŒ‡å—ï¼Œæ‚¨å¯ä»¥é€šè¿‡è¿™ä»½æŒ‡å—å¿«é€Ÿåœ°éƒ¨ç½²å‡º[ç¬¬ä¸€ä¸ªæµæ°´çº¿](https://nautes.io/guide/user-guide/run-a-pipeline.html)å’Œ[åº”ç”¨](https://nautes.io/guide/user-guide/deploy-an-application.html)ã€‚

## è·¯çº¿å›¾

æˆ‘ä»¬é€šè¿‡è¿™ä¸ª[é¡¹ç›®](https://github.com/orgs/nautes-labs/projects/1)æä¾›äº†å…³äºäº§å“è·¯çº¿å›¾ä»¥åŠè¿›åº¦ç­‰ä¿¡æ¯ã€‚
